function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},n={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in i)return i[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return i[e]=r,t.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},t.parcelRequired7c6=r);var a,o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt,d="object"==typeof t&&t&&t.Object===Object&&t,f="object"==typeof self&&self&&self.Object===Object&&self,g=d||f||Function("return this")(),h=Object.prototype.toString,v=Math.max,p=Math.min,m=function(){return g.Date.now()};function y(e,t,i){var n,r,a,o,s,l,c=0,u=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var i=n,a=r;return n=r=void 0,c=t,o=e.apply(a,i)}function h(e){return c=e,s=setTimeout(w,t),u?g(e):o}function y(e){var i=e-l;return void 0===l||i>=t||i<0||d&&e-c>=a}function w(){var e=m();if(y(e))return _(e);s=setTimeout(w,function(e){var i=t-(e-l);return d?p(i,a-(e-c)):i}(e))}function _(e){return s=void 0,f&&n?g(e):(n=r=void 0,o)}function M(){var e=m(),i=y(e);if(n=arguments,r=this,l=e,i){if(void 0===s)return h(l);if(d)return s=setTimeout(w,t),g(l)}return void 0===s&&(s=setTimeout(w,t)),o}return t=A(t)||0,b(i)&&(u=!!i.leading,a=(d="maxWait"in i)?v(A(i.maxWait)||0,t):a,f="trailing"in i?!!i.trailing:f),M.cancel=function(){void 0!==s&&clearTimeout(s),c=0,n=l=r=s=void 0},M.flush=function(){return void 0===s?o:_(m())},M}function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function A(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==h.call(e)}(e))return NaN;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var i=l.test(e);return i||c.test(e)?u(e.slice(2),i?2:8):s.test(e)?NaN:+e}a=function(e,t,i){var n=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return b(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),y(e,t,{leading:n,maxWait:t,trailing:r})};var w=r("2shzp");r("7KeNu");var _=r("bGr86"),M=r("dSs1Y");const P=w.default.create({baseURL:"https://api.themoviedb.org/3"}),T={params:{api_key:"6251e629c61bceaf56a3d45f05637256"}};const $=new class{async getWatchedMovies(){return _.filmsMainContainer.innerHTML="",this.movieArray=[76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095,76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095,76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095,76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095,76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095,76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095,76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095,76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095,76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095],this.movieArray}async getQueueMovies(){return _.filmsMainContainer.innerHTML="",this.movieArray=[668482,555604,76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095,76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095,76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095,76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095,76600,315162,593643],this.movieArray}async preload(){M.Loading.circle({svgColor:"red"});try{if(this.movieArray=await this.getQueueMovies(),console.log(this.movieArray.length),0===this.movieArray.length&&(this.movieArray=await this.getWatchedMovies()),0===this.movieArray.length)return void console.log("NO DATA");this.renderMovies()}catch(e){console.log(e)}finally{M.Loading.remove()}}reverseArray(){this.movieArray.reverse()}calcTotalPages(){this.totalPages=Math.ceil(this.movieArray.length/this.numberResultsPerPage)}calcPagesData(){const e=[];for(let t=0;t<Math.ceil(this.movieArray.length/this.numberResultsPerPage);t+=1)e[t]=this.movieArray.slice(t*this.numberResultsPerPage,t*this.numberResultsPerPage+this.numberResultsPerPage);this.pagesData=e.reduce(((e,t,i)=>(e[`page${i+1}`]=t,e)),{})}renderMovies(){if(0===this.movieArray)return void console.log(this.movieArray);this.reverseArray(),this.calcTotalPages(),this.calcPagesData();const e=`page${this.page}`;!async function(e){try{const t=e.map((async e=>(await P.get(`/movie/${e}`,T)).data)),i=function(e){return e.map((e=>{return`<li class="films__item" data-id="${e.id}">\n  <a href="" class="films__wrapper">\n    <div class="films__img-wrapper">\n      <img\n        class="films__img"\n        ${t=e.poster_path,t?`src="https://image.tmdb.org/t/p/original${t}"`:"src='./images/no-picture.png'"}\n        alt="${e.title}"\n        loading="lazy"\n        width='395' height='574'\n      />\n    </div>\n\n    <div class="img__row">\n            <p>${e.vote_average}</p>\n      <p>${Number.parseInt(e.release_date)}</p>\n    </div>\n\n    <div class="films__info">\n            <p class="films__name">${e.title}</p>\n\n      <p class="films__description">${function(e){if(e.length<=3)return e.map((e=>e.name)).join(", ");const t=e.map((e=>e.name));return t.splice(2,e.length-2,"Other"),t.join(", ")}(e.genres)}</p>\n    </div>\n  </a>\n</li>`;var t})).join("")}(await Promise.all(t));_.filmsMainContainer.insertAdjacentHTML("beforeend",i)}catch(e){console.log(e)}}(this.pagesData[e])}resetAll(){this.page=1,this.totalPages=null,this.movieArray=[],this.pagesData={},this.everythingIsLoaded=!1}constructor(){this.page=1,this.totalPages=null,this.numberResultsPerPage=20,this.movieArray=[],this.pagesData={},this.everythingIsLoaded=!1}};console.log($);({buttonsContainer:document.querySelector(".container-buttons")}).buttonsContainer.addEventListener("click",(function(e){if("watchedButton"===e.target.getAttribute("id"))return $.resetAll(),$.getWatchedMovies(),console.log($),void $.renderMovies();if("queueButton"===e.target.getAttribute("id"))return $.resetAll(),$.getQueueMovies(),console.log($),void $.renderMovies()})),$.resetAll(),$.preload(),window.addEventListener("scroll",e(a)((()=>{$.everythingIsLoaded||document.documentElement.scrollHeight-(window.scrollY+window.innerHeight)<=400&&($.page+=1,$.everythingIsLoaded=$.page>=$.totalPages,$.renderMovies())}),400));
//# sourceMappingURL=my-library.6ce4cc9c.js.map
