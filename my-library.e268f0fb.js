!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},t.parcelRequired7c6=i);var a,o=i("bpxeT"),s=i("2TvXO"),c=i("dIxxU"),u=i("l5bVx"),l="Expected a function",f=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,v=/^0o[0-7]+$/i,p=parseInt,m="object"==typeof t&&t&&t.Object===Object&&t,h="object"==typeof self&&self&&self.Object===Object&&self,y=m||h||Function("return this")(),b=Object.prototype.toString,w=Math.max,P=Math.min,_=function(){return y.Date.now()};function M(e,t,n){var r,i,a,o,s,c,u=0,f=!1,d=!1,g=!0;if("function"!=typeof e)throw new TypeError(l);function v(t){var n=r,a=i;return r=i=void 0,u=t,o=e.apply(a,n)}function p(e){return u=e,s=setTimeout(h,t),f?v(e):o}function m(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-u>=a}function h(){var e=_();if(m(e))return y(e);s=setTimeout(h,function(e){var n=t-(e-c);return d?P(n,a-(e-u)):n}(e))}function y(e){return s=void 0,g&&r?v(e):(r=i=void 0,o)}function b(){var e=_(),n=m(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return p(c);if(d)return s=setTimeout(h,t),v(c)}return void 0===s&&(s=setTimeout(h,t)),o}return t=T(t)||0,x(n)&&(f=!!n.leading,a=(d="maxWait"in n)?w(T(n.maxWait)||0,t):a,g="trailing"in n?!!n.trailing:g),b.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=c=i=s=void 0},b.flush=function(){return void 0===s?o:y(_())},b}function x(t){var n=void 0===t?"undefined":e(u)(t);return!!t&&("object"==n||"function"==n)}function T(t){if("number"==typeof t)return t;if(function(t){return"symbol"==(void 0===t?"undefined":e(u)(t))||function(e){return!!e&&"object"==typeof e}(t)&&"[object Symbol]"==b.call(t)}(t))return NaN;if(x(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=x(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(f,"");var r=g.test(t);return r||v.test(t)?p(t.slice(2),r?2:8):d.test(t)?NaN:+t}a=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError(l);return x(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),M(e,t,{leading:r,maxWait:t,trailing:i})};var A=i("ikGeD"),j={watchedButton:document.getElementById("watchedButton"),queueButton:document.getElementById("queueButton")};j.watchedButton.addEventListener("click",(function(){O.resetAll(),O.getWatchedMovies(),O.reverseArray(),O.calcTotalPages(),O.calcPagesData(),A.filmsMainContainer.innerHTML="",O.renderMovies()})),j.queueButton.addEventListener("click",(function(){O.getQueueMovies(),O.reverseArray(),O.calcTotalPages(),O.calcPagesData(),A.filmsMainContainer.innerHTML="",O.renderMovies()})),console.log(j.watchedButton),console.log(j.queueButton);var D=c.default.create({baseURL:"https://api.themoviedb.org/3"}),L={params:{api_key:"6251e629c61bceaf56a3d45f05637256"}},O={page:1,totalPages:null,numberResultsPerPage:20,movieArray:[],pagesData:{},everythingIsLoaded:!1,getWatchedMovies:function(){this.movieArray=[76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095,76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095,76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095,76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095,76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095,76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095,76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095,76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095,76600,315162,593643,661374,436270,536554,545611,19995,668482,555604,804095]},getQueueMovies:function(){this.movieArray=[]},reverseArray:function(){this.movieArray.reverse()},calcTotalPages:function(){this.totalPages=Math.ceil(this.movieArray.length/this.numberResultsPerPage)},calcPagesData:function(){for(var e=[],t=0;t<Math.ceil(this.movieArray.length/this.numberResultsPerPage);t+=1)e[t]=this.movieArray.slice(t*this.numberResultsPerPage,t*this.numberResultsPerPage+this.numberResultsPerPage);this.pagesData=e.reduce((function(e,t,n){return e["page".concat(n+1)]=t,e}),{})},renderMovies:function(){var e="page".concat(this.page);!function(e){E.apply(this,arguments)}(this.pagesData[e])},resetAll:function(){this.page=1,this.totalPages=null,this.movieArray=[],this.pagesData={},this.everythingIsLoaded=!1}};function E(){return E=e(o)(e(s).mark((function t(n){var r,i,a;return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.map(function(){var t=e(o)(e(s).mark((function t(n){var r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.get("/movie/".concat(n),L);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()),t.next=3,Promise.all(r);case 3:i=t.sent,a=B(i),A.filmsMainContainer.insertAdjacentHTML("beforeend",a);case 6:case"end":return t.stop()}}),t)}))),E.apply(this,arguments)}function B(e){return e.map((function(e){return'<li class="films__item" data-id="'.concat(e.id,'">\n  <a href="" class="films__wrapper">\n    <div class="films__img-wrapper">\n      <img\n        class="films__img"\n        ').concat((t=e.poster_path,t?'src="https://image.tmdb.org/t/p/original'.concat(t,'"'):"src='./images/no-picture.png'"),'\n        alt="').concat(e.title,'"\n        loading="lazy"\n        width=\'395\' height=\'574\'\n      />\n    </div>\n\n    <div class="img__row">\n            <p>').concat(e.vote_average,"</p>\n      <p>").concat(Number.parseInt(e.release_date),'</p>\n    </div>\n\n    <div class="films__info">\n            <p class="films__name">').concat(e.title,'</p>\n\n      <p class="films__description">').concat(function(e){if(e.length<=3)return e.map((function(e){return e.name})).join(", ");var t=e.map((function(e){return e.name}));return t.splice(2,e.length-2,"Other"),t.join(", ")}(e.genres),"</p>\n    </div>\n  </a>\n</li>");var t})).join("")}O.resetAll(),function(){O.getQueueMovies(),console.log(O.movieArray.length),0===O.movieArray.length&&O.getWatchedMovies();O.reverseArray(),O.calcTotalPages(),O.calcPagesData(),O.renderMovies()}(),window.addEventListener("scroll",e(a)((function(){O.everythingIsLoaded||document.documentElement.scrollHeight-(window.scrollY+window.innerHeight)<=400&&(O.page+=1,O.everythingIsLoaded=O.page>=O.totalPages,O.renderMovies(),console.log(O))}),400))}();
//# sourceMappingURL=my-library.e268f0fb.js.map
